<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>video</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: black;
        }
        #video-container {
    position: relative;
    width: 82.9%; /* 元のサイズから0.5%小さくする */
    padding-top: 46.7%; /* アスペクト比を維持しつつ0.5%小さくする */
    margin: 0 auto;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

        #vimeo-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 101%;
            height: 101%;
            pointer-events: none;
        }
        #play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10vw;
            height: 10vw;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        #play-button:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        #play-button::after {
            content: '';
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 1.5vw 0 1.5vw 2.6vw;
            border-color: transparent transparent transparent #ffffff;
            margin-left: 0.5vw;
        }
        #back-button {
    position: absolute;
    top: 0;
    left: 4%;
    width: 4vw;
    height: 4vw;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    background: transparent;
    border: none;
    padding: 0;
    opacity: 0.6; /* 通常時に薄くする */
    transition: opacity 0.3s ease;
}

#back-button:hover {
    opacity: 1; /* ホバー時に濃くする */
}

    </style>
</head>
<body>
    <div id="video-container">
        <iframe id="vimeo-player" src="" 
                frameborder="0" 
                allow="autoplay; fullscreen" 
                allowfullscreen>
        </iframe>
        <button id="play-button" aria-label="動画を再生"></button>
    </div>
    <button id="back-button" aria-label="戻る">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 12H7.5M5 12L10 7M5 12L10 17" stroke="white" stroke-width="2" stroke-linecap="square" stroke-linejoin="miter"/>

        </svg>
    </button>

    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
        const VIDEO_ID = '985542406'; // ここにVimeoの動画IDを入力してください
        const container = document.getElementById('video-container');
        const iframe = document.getElementById('vimeo-player');
        const playButton = document.getElementById('play-button');
        const backButton = document.getElementById('back-button');
        let player;

        // サムネイルを取得して背景に設定
        fetch(`https://vimeo.com/api/v2/video/${VIDEO_ID}.json`)
            .then(response => response.json())
            .then(data => {
                container.style.backgroundImage = `url(${data[0].thumbnail_large})`;
            })
            .catch(error => console.error('Error fetching thumbnail:', error));

        // iframeのsrcを設定
        iframe.src = `https://player.vimeo.com/video/${VIDEO_ID}?background=1&autoplay=0&loop=1&byline=0&title=0`;

        // Vimeoプレイヤーの初期化
        player = new Vimeo.Player(iframe);

        playButton.addEventListener('click', function() {
            player.setVolume(1);
            player.setCurrentTime(0);
            player.play();
            this.style.display = 'none';
        });

        // 動画が終了したらボタンを再表示
        player.on('ended', function() {
            playButton.style.display = 'flex';
        });

        // 戻るボタンのクリックイベント
        backButton.addEventListener('click', function() {
    const referrer = document.referrer;

    if (!referrer && !history.length) {
        // 遷移元URLも履歴もない場合はページを閉じる
        window.close();
    } else if (referrer && (referrer.includes('drive.google.com') || referrer.includes('dropbox.com') || referrer.includes('.pdf'))) {
        // 遷移元URLにGoogle Drive関連、Dropbox関連、PDF関連がある場合は履歴を戻る
        history.back();
    } else {
        // 上記以外の場合はページを閉じる
        window.close();
    }
});

        // ウィンドウのリサイズ時にコンテナとボタンの位置を調整
        function adjustLayout() {
            const windowHeight = window.innerHeight;
            const containerHeight = container.offsetHeight;
            const topMargin = (windowHeight - containerHeight) / 2;
            container.style.marginTop = `${topMargin}px`;
            
            // 戻るボタンの位置を動画の上端に合わせる
            backButton.style.top = `${topMargin}px`;
        }

        window.addEventListener('resize', adjustLayout);
        adjustLayout(); // 初期ロード時にも実行
    </script>
</body>
</html>
